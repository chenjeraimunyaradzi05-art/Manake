{"version":3,"names":["_jestMatcherUtils","require","_prettyFormat","_interopRequireWildcard","_redent","_interopRequireDefault","_componentTree","_formatDefault","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","HostElementTypeError","_Error","received","matcherFn","context","_this","_classCallCheck2","_callSuper","Error","captureStackTrace","withType","printWithType","printReceived","message","matcherHint","isNot","name","RECEIVED_COLOR","join","_inherits2","_createClass2","_wrapNativeSuper2","checkHostElement","element","isHostElement","formatElement","_element$props","props","children","_objectWithoutProperties2","_excluded","childrenToDisplay","undefined","$$typeof","Symbol","for","type","defaultMapProps","plugins","ReactTestComponent","ReactElement","printFunctionName","printBasicPrototype","highlight","formatElementArray","elements","length","map","formatMessage","matcher","expectedLabel","expectedValue","receivedLabel","receivedValue","EXPECTED_COLOR","formatValue","value","stringify"],"sources":["../../src/matchers/utils.tsx"],"sourcesContent":["import { ReactTestInstance } from 'react-test-renderer';\nimport {\n  EXPECTED_COLOR,\n  RECEIVED_COLOR,\n  matcherHint,\n  printWithType,\n  printReceived,\n  stringify,\n} from 'jest-matcher-utils';\nimport prettyFormat, { plugins } from 'pretty-format';\nimport redent from 'redent';\nimport { isHostElement } from '../helpers/component-tree';\nimport { defaultMapProps } from '../helpers/format-default';\n\nclass HostElementTypeError extends Error {\n  constructor(\n    received: unknown,\n    matcherFn: jest.CustomMatcher,\n    context: jest.MatcherContext\n  ) {\n    super();\n\n    /* istanbul ignore next */\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, matcherFn);\n    }\n\n    let withType = '';\n    try {\n      withType = printWithType('Received', received, printReceived);\n      /* istanbul ignore next */\n    } catch (e) {\n      // Deliberately empty.\n    }\n\n    this.message = [\n      matcherHint(\n        `${context.isNot ? '.not' : ''}.${matcherFn.name}`,\n        'received',\n        ''\n      ),\n      '',\n      `${RECEIVED_COLOR('received')} value must be a host element.`,\n      withType,\n    ].join('\\n');\n  }\n}\n\n/**\n * Throws HostElementTypeError if passed element is not a host element.\n *\n * @param element ReactTestInstance to check.\n * @param matcherFn Matcher function calling the check used for formatting error.\n * @param context Jest matcher context used for formatting error.\n */\nexport function checkHostElement(\n  element: ReactTestInstance | null | undefined,\n  matcherFn: jest.CustomMatcher,\n  context: jest.MatcherContext\n): asserts element is ReactTestInstance {\n  if (!isHostElement(element)) {\n    throw new HostElementTypeError(element, matcherFn, context);\n  }\n}\n\n/***\n * Format given element as a pretty-printed string.\n *\n * @param element Element to format.\n */\nexport function formatElement(element: ReactTestInstance | null) {\n  if (element == null) {\n    return '  null';\n  }\n\n  const { children, ...props } = element.props;\n  const childrenToDisplay =\n    typeof children === 'string' ? [children] : undefined;\n\n  return redent(\n    prettyFormat(\n      {\n        // This prop is needed persuade the prettyFormat that the element is\n        // a ReactTestRendererJSON instance, so it is formatted as JSX.\n        $$typeof: Symbol.for('react.test.json'),\n        type: element.type,\n        props: defaultMapProps(props),\n        children: childrenToDisplay,\n      },\n      {\n        plugins: [plugins.ReactTestComponent, plugins.ReactElement],\n        printFunctionName: false,\n        printBasicPrototype: false,\n        highlight: true,\n      }\n    ),\n    2\n  );\n}\n\nexport function formatElementArray(elements: ReactTestInstance[]) {\n  if (elements.length === 0) {\n    return '  (no elements)';\n  }\n\n  return redent(elements.map(formatElement).join('\\n'), 2);\n}\n\nexport function formatMessage(\n  matcher: string,\n  expectedLabel: string,\n  expectedValue: string | RegExp | null | undefined,\n  receivedLabel: string,\n  receivedValue: string | null | undefined\n) {\n  return [\n    `${matcher}\\n`,\n    `${expectedLabel}:\\n${EXPECTED_COLOR(\n      redent(formatValue(expectedValue), 2)\n    )}`,\n    `${receivedLabel}:\\n${RECEIVED_COLOR(\n      redent(formatValue(receivedValue), 2)\n    )}`,\n  ].join('\\n');\n}\n\nfunction formatValue(value: unknown) {\n  return typeof value === 'string' ? value : stringify(value);\n}\n"],"mappings":"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","ignoreList":[]}