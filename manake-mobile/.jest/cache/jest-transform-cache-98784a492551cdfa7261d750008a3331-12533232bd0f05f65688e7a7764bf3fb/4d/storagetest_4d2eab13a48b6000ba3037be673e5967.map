{"version":3,"names":["_getJestObj","mock","getItemAsync","jest","fn","Promise","resolve","setItemAsync","deleteItemAsync","Platform","OS","_interopRequireDefault","require","_asyncToGenerator2","_storage","SecureStore","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_require","describe","beforeEach","clearAllMocks","it","secureStorage","setItem","STORAGE_KEYS","AUTH_TOKEN","expect","toHaveBeenCalledWith","mockResolvedValue","result","getItem","toBe","toBeNull","deleteItem","testObject","name","id","setObject","USER_DATA","JSON","stringify","getObject","toEqual","consoleSpy","spyOn","console","mockImplementation","undefined","mockRestore"],"sources":["storage.test.ts"],"sourcesContent":["// Mock expo-secure-store before importing\r\njest.mock('expo-secure-store', () => ({\r\n  getItemAsync: jest.fn(() => Promise.resolve(null)),\r\n  setItemAsync: jest.fn(() => Promise.resolve()),\r\n  deleteItemAsync: jest.fn(() => Promise.resolve()),\r\n}));\r\n\r\n// Mock react-native Platform\r\njest.mock('react-native', () => ({\r\n  Platform: {\r\n    OS: 'ios',\r\n  },\r\n}));\r\n\r\nimport { secureStorage, STORAGE_KEYS } from '../storage';\r\nimport * as SecureStore from 'expo-secure-store';\r\n\r\ndescribe('SecureStorage Service', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('setItem', () => {\r\n    it('stores a value using SecureStore', async () => {\r\n      await secureStorage.setItem(STORAGE_KEYS.AUTH_TOKEN, 'test-token');\r\n\r\n      expect(SecureStore.setItemAsync).toHaveBeenCalledWith(\r\n        STORAGE_KEYS.AUTH_TOKEN,\r\n        'test-token'\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('getItem', () => {\r\n    it('retrieves a value from SecureStore', async () => {\r\n      (SecureStore.getItemAsync as jest.Mock).mockResolvedValue('stored-token');\r\n\r\n      const result = await secureStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);\r\n\r\n      expect(SecureStore.getItemAsync).toHaveBeenCalledWith(STORAGE_KEYS.AUTH_TOKEN);\r\n      expect(result).toBe('stored-token');\r\n    });\r\n\r\n    it('returns null when value does not exist', async () => {\r\n      (SecureStore.getItemAsync as jest.Mock).mockResolvedValue(null);\r\n\r\n      const result = await secureStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);\r\n\r\n      expect(result).toBeNull();\r\n    });\r\n  });\r\n\r\n  describe('deleteItem', () => {\r\n    it('deletes a value from SecureStore', async () => {\r\n      await secureStorage.deleteItem(STORAGE_KEYS.AUTH_TOKEN);\r\n\r\n      expect(SecureStore.deleteItemAsync).toHaveBeenCalledWith(STORAGE_KEYS.AUTH_TOKEN);\r\n    });\r\n  });\r\n\r\n  describe('setObject / getObject', () => {\r\n    it('stores and retrieves objects as JSON', async () => {\r\n      const testObject = { name: 'Test User', id: 123 };\r\n\r\n      await secureStorage.setObject(STORAGE_KEYS.USER_DATA, testObject);\r\n\r\n      expect(SecureStore.setItemAsync).toHaveBeenCalledWith(\r\n        STORAGE_KEYS.USER_DATA,\r\n        JSON.stringify(testObject)\r\n      );\r\n    });\r\n\r\n    it('parses JSON when retrieving objects', async () => {\r\n      const testObject = { name: 'Test User', id: 123 };\r\n      (SecureStore.getItemAsync as jest.Mock).mockResolvedValue(JSON.stringify(testObject));\r\n\r\n      const result = await secureStorage.getObject(STORAGE_KEYS.USER_DATA);\r\n\r\n      expect(result).toEqual(testObject);\r\n    });\r\n\r\n    it('returns null for invalid JSON', async () => {\r\n      (SecureStore.getItemAsync as jest.Mock).mockResolvedValue('invalid-json');\r\n\r\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation(() => undefined);\r\n\r\n      const result = await secureStorage.getObject(STORAGE_KEYS.USER_DATA);\r\n\r\n      expect(result).toBeNull();\r\n\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}