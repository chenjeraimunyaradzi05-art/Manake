{"version":3,"names":["_getJestObj","mock","useAuthStore","jest","fn","user","isAuthenticated","isLoading","error","login","mockLogin","register","mockRegister","logout","mockLogout","loadUser","mockLoadUser","updateProfile","mockUpdateProfile","clearError","mockClearError","setDemoMode","mockSetDemoMode","secureStorage","getItem","mockGetItem","apply","arguments","setItem","mockSetItem","deleteItem","mockDeleteItem","STORAGE_KEYS","AUTH_TOKEN","USER_DATA","PREFERENCES","ONBOARDING_COMPLETE","setAuthToken","_interopRequireDefault","require","_asyncToGenerator2","_require7","describe","beforeEach","clearAllMocks","mockResolvedValue","it","_require","expect","toBe","_require2","store","toBeNull","_require3","default","_require4","result","toHaveBeenCalledWith","_require5","_require6"],"sources":["useAuth.test.ts"],"sourcesContent":["/**\r\n * Tests for useAuth hook\r\n * Tests session restoration and auth flow\r\n */\r\n\r\n// Mock the auth store\r\nconst mockLogin = jest.fn();\r\nconst mockRegister = jest.fn();\r\nconst mockLogout = jest.fn();\r\nconst mockLoadUser = jest.fn();\r\nconst mockUpdateProfile = jest.fn();\r\nconst mockClearError = jest.fn();\r\nconst mockSetDemoMode = jest.fn();\r\n\r\njest.mock('../../store/authStore', () => ({\r\n  useAuthStore: jest.fn(() => ({\r\n    user: null,\r\n    isAuthenticated: false,\r\n    isLoading: false,\r\n    error: null,\r\n    login: mockLogin,\r\n    register: mockRegister,\r\n    logout: mockLogout,\r\n    loadUser: mockLoadUser,\r\n    updateProfile: mockUpdateProfile,\r\n    clearError: mockClearError,\r\n    setDemoMode: mockSetDemoMode,\r\n  })),\r\n}));\r\n\r\n// Mock secure storage\r\nconst mockGetItem = jest.fn();\r\nconst mockSetItem = jest.fn();\r\nconst mockDeleteItem = jest.fn();\r\n\r\njest.mock('../../services/storage', () => ({\r\n  secureStorage: {\r\n    getItem: (...args: any[]) => mockGetItem(...args),\r\n    setItem: (...args: any[]) => mockSetItem(...args),\r\n    deleteItem: (...args: any[]) => mockDeleteItem(...args),\r\n  },\r\n  STORAGE_KEYS: {\r\n    AUTH_TOKEN: 'auth_token',\r\n    USER_DATA: 'user_data',\r\n    PREFERENCES: 'preferences',\r\n    ONBOARDING_COMPLETE: 'onboarding_complete',\r\n  },\r\n}));\r\n\r\n// Mock API\r\njest.mock('../../services/api', () => ({\r\n  setAuthToken: jest.fn(),\r\n}));\r\n\r\ndescribe('useAuth Hook Logic', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    mockGetItem.mockResolvedValue(null);\r\n  });\r\n\r\n  describe('token storage', () => {\r\n    it('should have correct storage keys', () => {\r\n      const { STORAGE_KEYS } = require('../../services/storage');\r\n      \r\n      expect(STORAGE_KEYS.AUTH_TOKEN).toBe('auth_token');\r\n      expect(STORAGE_KEYS.USER_DATA).toBe('user_data');\r\n    });\r\n  });\r\n\r\n  describe('auth store mock', () => {\r\n    it('should have correct initial state', () => {\r\n      const { useAuthStore } = require('../../store/authStore');\r\n      const store = useAuthStore();\r\n      \r\n      expect(store.user).toBeNull();\r\n      expect(store.isAuthenticated).toBe(false);\r\n      expect(store.isLoading).toBe(false);\r\n      expect(store.error).toBeNull();\r\n    });\r\n\r\n    it('should have all required actions', () => {\r\n      const { useAuthStore } = require('../../store/authStore');\r\n      const store = useAuthStore();\r\n      \r\n      expect(typeof store.login).toBe('function');\r\n      expect(typeof store.register).toBe('function');\r\n      expect(typeof store.logout).toBe('function');\r\n      expect(typeof store.loadUser).toBe('function');\r\n      expect(typeof store.updateProfile).toBe('function');\r\n      expect(typeof store.clearError).toBe('function');\r\n      expect(typeof store.setDemoMode).toBe('function');\r\n    });\r\n  });\r\n\r\n  describe('storage operations', () => {\r\n    it('should get item from storage', async () => {\r\n      const { secureStorage } = require('../../services/storage');\r\n      mockGetItem.mockResolvedValue('test-token');\r\n      \r\n      const result = await secureStorage.getItem('auth_token');\r\n      \r\n      expect(mockGetItem).toHaveBeenCalledWith('auth_token');\r\n      expect(result).toBe('test-token');\r\n    });\r\n\r\n    it('should set item in storage', async () => {\r\n      const { secureStorage } = require('../../services/storage');\r\n      \r\n      await secureStorage.setItem('auth_token', 'new-token');\r\n      \r\n      expect(mockSetItem).toHaveBeenCalledWith('auth_token', 'new-token');\r\n    });\r\n\r\n    it('should delete item from storage', async () => {\r\n      const { secureStorage } = require('../../services/storage');\r\n      \r\n      await secureStorage.deleteItem('auth_token');\r\n      \r\n      expect(mockDeleteItem).toHaveBeenCalledWith('auth_token');\r\n    });\r\n  });\r\n});\r\n"],"mappings":"AAcAA,WAAA,GAAKC,IAAI,CAAC,uBAAuB,EAAE;EAAA,OAAO;IACxCC,YAAY,EAAEC,IAAI,CAACC,EAAE,CAAC;MAAA,OAAO;QAC3BC,IAAI,EAAE,IAAI;QACVC,eAAe,EAAE,KAAK;QACtBC,SAAS,EAAE,KAAK;QAChBC,KAAK,EAAE,IAAI;QACXC,KAAK,EAAEC,SAAS;QAChBC,QAAQ,EAAEC,YAAY;QACtBC,MAAM,EAAEC,UAAU;QAClBC,QAAQ,EAAEC,YAAY;QACtBC,aAAa,EAAEC,iBAAiB;QAChCC,UAAU,EAAEC,cAAc;QAC1BC,WAAW,EAAEC;MACf,CAAC;IAAA,CAAC;EACJ,CAAC;AAAA,CAAC,CAAC;AAOHtB,WAAA,GAAKC,IAAI,CAAC,wBAAwB,EAAE;EAAA,OAAO;IACzCsB,aAAa,EAAE;MACbC,OAAO,EAAE,SAATA,OAAOA,CAAA;QAAA,OAAsBC,WAAW,CAAAC,KAAA,SAAAC,SAAQ,CAAC;MAAA;MACjDC,OAAO,EAAE,SAATA,OAAOA,CAAA;QAAA,OAAsBC,WAAW,CAAAH,KAAA,SAAAC,SAAQ,CAAC;MAAA;MACjDG,UAAU,EAAE,SAAZA,UAAUA,CAAA;QAAA,OAAsBC,cAAc,CAAAL,KAAA,SAAAC,SAAQ,CAAC;MAAA;IACzD,CAAC;IACDK,YAAY,EAAE;MACZC,UAAU,EAAE,YAAY;MACxBC,SAAS,EAAE,WAAW;MACtBC,WAAW,EAAE,aAAa;MAC1BC,mBAAmB,EAAE;IACvB;EACF,CAAC;AAAA,CAAC,CAAC;AAGHpC,WAAA,GAAKC,IAAI,CAAC,oBAAoB,EAAE;EAAA,OAAO;IACrCoC,YAAY,EAAElC,IAAI,CAACC,EAAE,CAAC;EACxB,CAAC;AAAA,CAAC,CAAC;AAAC,IAAAkC,sBAAA,GAAAC,OAAA;AAAA,IAAAC,kBAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAA,SAAAvC,YAAA;EAAA,IAAAyC,SAAA,GAAAF,OAAA;IAAApC,IAAA,GAAAsC,SAAA,CAAAtC,IAAA;EAAAH,WAAA,YAAAA,YAAA;IAAA,OAAAG,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AA9CJ,IAAMO,SAAS,GAAGP,IAAI,CAACC,EAAE,CAAC,CAAC;AAC3B,IAAMQ,YAAY,GAAGT,IAAI,CAACC,EAAE,CAAC,CAAC;AAC9B,IAAMU,UAAU,GAAGX,IAAI,CAACC,EAAE,CAAC,CAAC;AAC5B,IAAMY,YAAY,GAAGb,IAAI,CAACC,EAAE,CAAC,CAAC;AAC9B,IAAMc,iBAAiB,GAAGf,IAAI,CAACC,EAAE,CAAC,CAAC;AACnC,IAAMgB,cAAc,GAAGjB,IAAI,CAACC,EAAE,CAAC,CAAC;AAChC,IAAMkB,eAAe,GAAGnB,IAAI,CAACC,EAAE,CAAC,CAAC;AAmBjC,IAAMqB,WAAW,GAAGtB,IAAI,CAACC,EAAE,CAAC,CAAC;AAC7B,IAAMyB,WAAW,GAAG1B,IAAI,CAACC,EAAE,CAAC,CAAC;AAC7B,IAAM2B,cAAc,GAAG5B,IAAI,CAACC,EAAE,CAAC,CAAC;AAqBhCsC,QAAQ,CAAC,oBAAoB,EAAE,YAAM;EACnCC,UAAU,CAAC,YAAM;IACfxC,IAAI,CAACyC,aAAa,CAAC,CAAC;IACpBnB,WAAW,CAACoB,iBAAiB,CAAC,IAAI,CAAC;EACrC,CAAC,CAAC;EAEFH,QAAQ,CAAC,eAAe,EAAE,YAAM;IAC9BI,EAAE,CAAC,kCAAkC,EAAE,YAAM;MAC3C,IAAAC,QAAA,GAAyBR,OAAO,CAAC,wBAAwB,CAAC;QAAlDP,YAAY,GAAAe,QAAA,CAAZf,YAAY;MAEpBgB,MAAM,CAAChB,YAAY,CAACC,UAAU,CAAC,CAACgB,IAAI,CAAC,YAAY,CAAC;MAClDD,MAAM,CAAChB,YAAY,CAACE,SAAS,CAAC,CAACe,IAAI,CAAC,WAAW,CAAC;IAClD,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFP,QAAQ,CAAC,iBAAiB,EAAE,YAAM;IAChCI,EAAE,CAAC,mCAAmC,EAAE,YAAM;MAC5C,IAAAI,SAAA,GAAyBX,OAAO,CAAC,uBAAuB,CAAC;QAAjDrC,YAAY,GAAAgD,SAAA,CAAZhD,YAAY;MACpB,IAAMiD,KAAK,GAAGjD,YAAY,CAAC,CAAC;MAE5B8C,MAAM,CAACG,KAAK,CAAC9C,IAAI,CAAC,CAAC+C,QAAQ,CAAC,CAAC;MAC7BJ,MAAM,CAACG,KAAK,CAAC7C,eAAe,CAAC,CAAC2C,IAAI,CAAC,KAAK,CAAC;MACzCD,MAAM,CAACG,KAAK,CAAC5C,SAAS,CAAC,CAAC0C,IAAI,CAAC,KAAK,CAAC;MACnCD,MAAM,CAACG,KAAK,CAAC3C,KAAK,CAAC,CAAC4C,QAAQ,CAAC,CAAC;IAChC,CAAC,CAAC;IAEFN,EAAE,CAAC,kCAAkC,EAAE,YAAM;MAC3C,IAAAO,SAAA,GAAyBd,OAAO,CAAC,uBAAuB,CAAC;QAAjDrC,YAAY,GAAAmD,SAAA,CAAZnD,YAAY;MACpB,IAAMiD,KAAK,GAAGjD,YAAY,CAAC,CAAC;MAE5B8C,MAAM,CAAC,OAAOG,KAAK,CAAC1C,KAAK,CAAC,CAACwC,IAAI,CAAC,UAAU,CAAC;MAC3CD,MAAM,CAAC,OAAOG,KAAK,CAACxC,QAAQ,CAAC,CAACsC,IAAI,CAAC,UAAU,CAAC;MAC9CD,MAAM,CAAC,OAAOG,KAAK,CAACtC,MAAM,CAAC,CAACoC,IAAI,CAAC,UAAU,CAAC;MAC5CD,MAAM,CAAC,OAAOG,KAAK,CAACpC,QAAQ,CAAC,CAACkC,IAAI,CAAC,UAAU,CAAC;MAC9CD,MAAM,CAAC,OAAOG,KAAK,CAAClC,aAAa,CAAC,CAACgC,IAAI,CAAC,UAAU,CAAC;MACnDD,MAAM,CAAC,OAAOG,KAAK,CAAChC,UAAU,CAAC,CAAC8B,IAAI,CAAC,UAAU,CAAC;MAChDD,MAAM,CAAC,OAAOG,KAAK,CAAC9B,WAAW,CAAC,CAAC4B,IAAI,CAAC,UAAU,CAAC;IACnD,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFP,QAAQ,CAAC,oBAAoB,EAAE,YAAM;IACnCI,EAAE,CAAC,8BAA8B,MAAAN,kBAAA,CAAAc,OAAA,EAAE,aAAY;MAC7C,IAAAC,SAAA,GAA0BhB,OAAO,CAAC,wBAAwB,CAAC;QAAnDhB,aAAa,GAAAgC,SAAA,CAAbhC,aAAa;MACrBE,WAAW,CAACoB,iBAAiB,CAAC,YAAY,CAAC;MAE3C,IAAMW,MAAM,SAASjC,aAAa,CAACC,OAAO,CAAC,YAAY,CAAC;MAExDwB,MAAM,CAACvB,WAAW,CAAC,CAACgC,oBAAoB,CAAC,YAAY,CAAC;MACtDT,MAAM,CAACQ,MAAM,CAAC,CAACP,IAAI,CAAC,YAAY,CAAC;IACnC,CAAC,EAAC;IAEFH,EAAE,CAAC,4BAA4B,MAAAN,kBAAA,CAAAc,OAAA,EAAE,aAAY;MAC3C,IAAAI,SAAA,GAA0BnB,OAAO,CAAC,wBAAwB,CAAC;QAAnDhB,aAAa,GAAAmC,SAAA,CAAbnC,aAAa;MAErB,MAAMA,aAAa,CAACK,OAAO,CAAC,YAAY,EAAE,WAAW,CAAC;MAEtDoB,MAAM,CAACnB,WAAW,CAAC,CAAC4B,oBAAoB,CAAC,YAAY,EAAE,WAAW,CAAC;IACrE,CAAC,EAAC;IAEFX,EAAE,CAAC,iCAAiC,MAAAN,kBAAA,CAAAc,OAAA,EAAE,aAAY;MAChD,IAAAK,SAAA,GAA0BpB,OAAO,CAAC,wBAAwB,CAAC;QAAnDhB,aAAa,GAAAoC,SAAA,CAAbpC,aAAa;MAErB,MAAMA,aAAa,CAACO,UAAU,CAAC,YAAY,CAAC;MAE5CkB,MAAM,CAACjB,cAAc,CAAC,CAAC0B,oBAAoB,CAAC,YAAY,CAAC;IAC3D,CAAC,EAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}