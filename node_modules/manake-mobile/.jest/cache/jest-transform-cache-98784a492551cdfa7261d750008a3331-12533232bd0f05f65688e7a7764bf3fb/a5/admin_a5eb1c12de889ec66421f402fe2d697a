6575a0fb352e42bce8c63c6f8c9ffbde
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.updateUserRole = exports.toggleUserActive = exports.toggleFeatureStory = exports.rejectStory = exports.getUsers = exports.getUserById = exports.getRecentActivity = exports.getPendingStories = exports.getDashboardStats = exports.deleteUser = exports.deleteStory = exports.approveStory = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _reactNative = require("react-native");
var _api = require("./api");
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var API_BASE_URL = __DEV__ ? _reactNative.Platform.select({
  ios: 'http://localhost:3001/api',
  android: 'http://10.0.2.2:3001/api',
  default: 'http://localhost:3001/api'
}) : 'https://manake.netlify.app/api';
function fetchApi(_x) {
  return _fetchApi.apply(this, arguments);
}
function _fetchApi() {
  _fetchApi = (0, _asyncToGenerator2.default)(function* (endpoint) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var url = `${API_BASE_URL}${endpoint}`;
    var token = (0, _api.getAuthToken)();
    var headers = _objectSpread({
      'Content-Type': 'application/json'
    }, options.headers);
    if (token) {
      headers['Authorization'] = `Bearer ${token}`;
    }
    var response = yield fetch(url, _objectSpread(_objectSpread({}, options), {}, {
      headers: headers
    }));
    if (!response.ok) {
      var errorData = yield response.json().catch(function () {
        return {};
      });
      throw new Error(errorData.message || `HTTP error! status: ${response.status}`);
    }
    return response.json();
  });
  return _fetchApi.apply(this, arguments);
}
var getDashboardStats = exports.getDashboardStats = function () {
  var _ref = (0, _asyncToGenerator2.default)(function* () {
    return fetchApi('/v1/admin/stats');
  });
  return function getDashboardStats() {
    return _ref.apply(this, arguments);
  };
}();
var getRecentActivity = exports.getRecentActivity = function () {
  var _ref2 = (0, _asyncToGenerator2.default)(function* () {
    var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 20;
    return fetchApi(`/v1/admin/activity?limit=${limit}`);
  });
  return function getRecentActivity() {
    return _ref2.apply(this, arguments);
  };
}();
var getPendingStories = exports.getPendingStories = function () {
  var _ref3 = (0, _asyncToGenerator2.default)(function* () {
    var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
    var limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;
    return fetchApi(`/v1/admin/stories/pending?page=${page}&limit=${limit}`);
  });
  return function getPendingStories() {
    return _ref3.apply(this, arguments);
  };
}();
var approveStory = exports.approveStory = function () {
  var _ref4 = (0, _asyncToGenerator2.default)(function* (storyId) {
    return fetchApi(`/v1/admin/stories/${storyId}/approve`, {
      method: 'PATCH'
    });
  });
  return function approveStory(_x2) {
    return _ref4.apply(this, arguments);
  };
}();
var rejectStory = exports.rejectStory = function () {
  var _ref5 = (0, _asyncToGenerator2.default)(function* (storyId, reason) {
    return fetchApi(`/v1/admin/stories/${storyId}/reject`, {
      method: 'PATCH',
      body: JSON.stringify({
        reason: reason
      })
    });
  });
  return function rejectStory(_x3, _x4) {
    return _ref5.apply(this, arguments);
  };
}();
var toggleFeatureStory = exports.toggleFeatureStory = function () {
  var _ref6 = (0, _asyncToGenerator2.default)(function* (storyId, featured) {
    return fetchApi(`/v1/admin/stories/${storyId}/feature`, {
      method: 'PATCH',
      body: JSON.stringify({
        featured: featured
      })
    });
  });
  return function toggleFeatureStory(_x5, _x6) {
    return _ref6.apply(this, arguments);
  };
}();
var deleteStory = exports.deleteStory = function () {
  var _ref7 = (0, _asyncToGenerator2.default)(function* (storyId) {
    return fetchApi(`/v1/admin/stories/${storyId}`, {
      method: 'DELETE'
    });
  });
  return function deleteStory(_x7) {
    return _ref7.apply(this, arguments);
  };
}();
var getUsers = exports.getUsers = function () {
  var _ref8 = (0, _asyncToGenerator2.default)(function* () {
    var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
    var limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;
    var options = arguments.length > 2 ? arguments[2] : undefined;
    var params = new URLSearchParams({
      page: String(page),
      limit: String(limit)
    });
    if (options != null && options.role) params.append('role', options.role);
    if (options != null && options.search) params.append('search', options.search);
    return fetchApi(`/v1/admin/users?${params}`);
  });
  return function getUsers() {
    return _ref8.apply(this, arguments);
  };
}();
var getUserById = exports.getUserById = function () {
  var _ref9 = (0, _asyncToGenerator2.default)(function* (userId) {
    return fetchApi(`/v1/admin/users/${userId}`);
  });
  return function getUserById(_x8) {
    return _ref9.apply(this, arguments);
  };
}();
var updateUserRole = exports.updateUserRole = function () {
  var _ref0 = (0, _asyncToGenerator2.default)(function* (userId, role) {
    return fetchApi(`/v1/admin/users/${userId}/role`, {
      method: 'PATCH',
      body: JSON.stringify({
        role: role
      })
    });
  });
  return function updateUserRole(_x9, _x0) {
    return _ref0.apply(this, arguments);
  };
}();
var toggleUserActive = exports.toggleUserActive = function () {
  var _ref1 = (0, _asyncToGenerator2.default)(function* (userId) {
    return fetchApi(`/v1/admin/users/${userId}/toggle-active`, {
      method: 'PATCH'
    });
  });
  return function toggleUserActive(_x1) {
    return _ref1.apply(this, arguments);
  };
}();
var deleteUser = exports.deleteUser = function () {
  var _ref10 = (0, _asyncToGenerator2.default)(function* (userId) {
    return fetchApi(`/v1/admin/users/${userId}`, {
      method: 'DELETE'
    });
  });
  return function deleteUser(_x10) {
    return _ref10.apply(this, arguments);
  };
}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3ROYXRpdmUiLCJyZXF1aXJlIiwiX2FwaSIsIm93bktleXMiLCJlIiwiciIsInQiLCJPYmplY3QiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJkZWZhdWx0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJkZWZpbmVQcm9wZXJ0eSIsIkFQSV9CQVNFX1VSTCIsIl9fREVWX18iLCJQbGF0Zm9ybSIsInNlbGVjdCIsImlvcyIsImFuZHJvaWQiLCJmZXRjaEFwaSIsIl94IiwiX2ZldGNoQXBpIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiZW5kcG9pbnQiLCJvcHRpb25zIiwidW5kZWZpbmVkIiwidXJsIiwidG9rZW4iLCJnZXRBdXRoVG9rZW4iLCJoZWFkZXJzIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsImNhdGNoIiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhdHVzIiwiZ2V0RGFzaGJvYXJkU3RhdHMiLCJleHBvcnRzIiwiX3JlZiIsImdldFJlY2VudEFjdGl2aXR5IiwiX3JlZjIiLCJsaW1pdCIsImdldFBlbmRpbmdTdG9yaWVzIiwiX3JlZjMiLCJwYWdlIiwiYXBwcm92ZVN0b3J5IiwiX3JlZjQiLCJzdG9yeUlkIiwibWV0aG9kIiwiX3gyIiwicmVqZWN0U3RvcnkiLCJfcmVmNSIsInJlYXNvbiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiX3gzIiwiX3g0IiwidG9nZ2xlRmVhdHVyZVN0b3J5IiwiX3JlZjYiLCJmZWF0dXJlZCIsIl94NSIsIl94NiIsImRlbGV0ZVN0b3J5IiwiX3JlZjciLCJfeDciLCJnZXRVc2VycyIsIl9yZWY4IiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiU3RyaW5nIiwicm9sZSIsImFwcGVuZCIsInNlYXJjaCIsImdldFVzZXJCeUlkIiwiX3JlZjkiLCJ1c2VySWQiLCJfeDgiLCJ1cGRhdGVVc2VyUm9sZSIsIl9yZWYwIiwiX3g5IiwiX3gwIiwidG9nZ2xlVXNlckFjdGl2ZSIsIl9yZWYxIiwiX3gxIiwiZGVsZXRlVXNlciIsIl9yZWYxMCIsIl94MTAiXSwic291cmNlcyI6WyJhZG1pbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQWRtaW4gU2VydmljZVxyXG4gKiBIYW5kbGVzIGFkbWluIGRhc2hib2FyZCBBUEkgY2FsbHMgZm9yIG1vZGVyYXRpb24gYW5kIGFuYWx5dGljc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAncmVhY3QtbmF0aXZlJztcclxuaW1wb3J0IHsgZ2V0QXV0aFRva2VuIH0gZnJvbSAnLi9hcGknO1xyXG5cclxuLy8gQVBJIENvbmZpZ3VyYXRpb25cclxuY29uc3QgQVBJX0JBU0VfVVJMID0gX19ERVZfXyBcclxuICA/IFBsYXRmb3JtLnNlbGVjdCh7XHJcbiAgICAgIGlvczogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMS9hcGknLFxyXG4gICAgICBhbmRyb2lkOiAnaHR0cDovLzEwLjAuMi4yOjMwMDEvYXBpJyxcclxuICAgICAgZGVmYXVsdDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMS9hcGknXHJcbiAgICB9KVxyXG4gIDogJ2h0dHBzOi8vbWFuYWtlLm5ldGxpZnkuYXBwL2FwaSc7XHJcblxyXG4vLyBHZW5lcmljIGZldGNoIHdyYXBwZXJcclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hBcGk8VD4oZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fSk6IFByb21pc2U8VD4ge1xyXG4gIGNvbnN0IHVybCA9IGAke0FQSV9CQVNFX1VSTH0ke2VuZHBvaW50fWA7XHJcbiAgY29uc3QgdG9rZW4gPSBnZXRBdXRoVG9rZW4oKTtcclxuICBcclxuICBjb25zdCBoZWFkZXJzOiBIZWFkZXJzSW5pdCA9IHtcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAuLi5vcHRpb25zLmhlYWRlcnMsXHJcbiAgfTtcclxuICBcclxuICBpZiAodG9rZW4pIHtcclxuICAgIChoZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dG9rZW59YDtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7IC4uLm9wdGlvbnMsIGhlYWRlcnMgfSk7XHJcblxyXG4gIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvckRhdGEubWVzc2FnZSB8fCBgSFRUUCBlcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PSBUeXBlcyA9PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGFzaGJvYXJkU3RhdHMge1xyXG4gIHVzZXJzOiB7XHJcbiAgICB0b3RhbDogbnVtYmVyO1xyXG4gICAgbmV3VGhpc01vbnRoOiBudW1iZXI7XHJcbiAgfTtcclxuICBzdG9yaWVzOiB7XHJcbiAgICB0b3RhbDogbnVtYmVyO1xyXG4gICAgcGVuZGluZzogbnVtYmVyO1xyXG4gIH07XHJcbiAgZG9uYXRpb25zOiB7XHJcbiAgICB0b3RhbEFtb3VudDogbnVtYmVyO1xyXG4gICAgdG90YWxDb3VudDogbnVtYmVyO1xyXG4gICAgdGhpc01vbnRoOiB7IGFtb3VudDogbnVtYmVyOyBjb3VudDogbnVtYmVyIH07XHJcbiAgICBsYXN0TW9udGg6IHsgYW1vdW50OiBudW1iZXI7IGNvdW50OiBudW1iZXIgfTtcclxuICB9O1xyXG4gIG1lc3NhZ2VzOiB7XHJcbiAgICB0b3RhbDogbnVtYmVyO1xyXG4gICAgdW5yZWFkOiBudW1iZXI7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZG1pblN0b3J5IHtcclxuICBfaWQ6IHN0cmluZztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIGV4Y2VycHQ6IHN0cmluZztcclxuICBhdXRob3I6IHsgbmFtZTogc3RyaW5nOyByb2xlOiBzdHJpbmcgfTtcclxuICBjYXRlZ29yeTogc3RyaW5nO1xyXG4gIHN0YXR1czogJ2RyYWZ0JyB8ICdwZW5kaW5nJyB8ICdwdWJsaXNoZWQnIHwgJ3JlamVjdGVkJztcclxuICBmZWF0dXJlZDogYm9vbGVhbjtcclxuICBjcmVhdGVkQXQ6IHN0cmluZztcclxuICBwdWJsaXNoZWRBdD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZG1pblVzZXIge1xyXG4gIF9pZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHJvbGU6ICd1c2VyJyB8ICdhZG1pbicgfCAnbW9kZXJhdG9yJztcclxuICBpc0FjdGl2ZTogYm9vbGVhbjtcclxuICBpc0VtYWlsVmVyaWZpZWQ6IGJvb2xlYW47XHJcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XHJcbiAgbGFzdExvZ2luPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2luYXRlZFJlc3BvbnNlPFQ+IHtcclxuICBkYXRhOiBUW107XHJcbiAgcGFnaW5hdGlvbjoge1xyXG4gICAgcGFnZTogbnVtYmVyO1xyXG4gICAgbGltaXQ6IG51bWJlcjtcclxuICAgIHRvdGFsOiBudW1iZXI7XHJcbiAgICBwYWdlczogbnVtYmVyO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PSBEYXNoYm9hcmQgPT09PT09PT09PT09XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0RGFzaGJvYXJkU3RhdHMgPSBhc3luYyAoKTogUHJvbWlzZTxEYXNoYm9hcmRTdGF0cz4gPT4ge1xyXG4gIHJldHVybiBmZXRjaEFwaTxEYXNoYm9hcmRTdGF0cz4oJy92MS9hZG1pbi9zdGF0cycpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFJlY2VudEFjdGl2aXR5ID0gYXN5bmMgKGxpbWl0ID0gMjApID0+IHtcclxuICByZXR1cm4gZmV0Y2hBcGkoYC92MS9hZG1pbi9hY3Rpdml0eT9saW1pdD0ke2xpbWl0fWApO1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09IFN0b3J5IE1vZGVyYXRpb24gPT09PT09PT09PT09XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0UGVuZGluZ1N0b3JpZXMgPSBhc3luYyAocGFnZSA9IDEsIGxpbWl0ID0gMjApOiBQcm9taXNlPFBhZ2luYXRlZFJlc3BvbnNlPEFkbWluU3Rvcnk+PiA9PiB7XHJcbiAgcmV0dXJuIGZldGNoQXBpPFBhZ2luYXRlZFJlc3BvbnNlPEFkbWluU3Rvcnk+PihgL3YxL2FkbWluL3N0b3JpZXMvcGVuZGluZz9wYWdlPSR7cGFnZX0mbGltaXQ9JHtsaW1pdH1gKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhcHByb3ZlU3RvcnkgPSBhc3luYyAoc3RvcnlJZDogc3RyaW5nKTogUHJvbWlzZTx7IG1lc3NhZ2U6IHN0cmluZzsgZGF0YTogQWRtaW5TdG9yeSB9PiA9PiB7XHJcbiAgcmV0dXJuIGZldGNoQXBpPHsgbWVzc2FnZTogc3RyaW5nOyBkYXRhOiBBZG1pblN0b3J5IH0+KGAvdjEvYWRtaW4vc3Rvcmllcy8ke3N0b3J5SWR9L2FwcHJvdmVgLCB7XHJcbiAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcmVqZWN0U3RvcnkgPSBhc3luYyAoc3RvcnlJZDogc3RyaW5nLCByZWFzb24/OiBzdHJpbmcpOiBQcm9taXNlPHsgbWVzc2FnZTogc3RyaW5nOyBkYXRhOiBBZG1pblN0b3J5IH0+ID0+IHtcclxuICByZXR1cm4gZmV0Y2hBcGk8eyBtZXNzYWdlOiBzdHJpbmc7IGRhdGE6IEFkbWluU3RvcnkgfT4oYC92MS9hZG1pbi9zdG9yaWVzLyR7c3RvcnlJZH0vcmVqZWN0YCwge1xyXG4gICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyByZWFzb24gfSksXHJcbiAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdG9nZ2xlRmVhdHVyZVN0b3J5ID0gYXN5bmMgKHN0b3J5SWQ6IHN0cmluZywgZmVhdHVyZWQ6IGJvb2xlYW4pOiBQcm9taXNlPHsgbWVzc2FnZTogc3RyaW5nOyBkYXRhOiBBZG1pblN0b3J5IH0+ID0+IHtcclxuICByZXR1cm4gZmV0Y2hBcGk8eyBtZXNzYWdlOiBzdHJpbmc7IGRhdGE6IEFkbWluU3RvcnkgfT4oYC92MS9hZG1pbi9zdG9yaWVzLyR7c3RvcnlJZH0vZmVhdHVyZWAsIHtcclxuICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZmVhdHVyZWQgfSksXHJcbiAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlU3RvcnkgPSBhc3luYyAoc3RvcnlJZDogc3RyaW5nKTogUHJvbWlzZTx7IG1lc3NhZ2U6IHN0cmluZyB9PiA9PiB7XHJcbiAgcmV0dXJuIGZldGNoQXBpPHsgbWVzc2FnZTogc3RyaW5nIH0+KGAvdjEvYWRtaW4vc3Rvcmllcy8ke3N0b3J5SWR9YCwge1xyXG4gICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICB9KTtcclxufTtcclxuXHJcbi8vID09PT09PT09PT09PSBVc2VyIE1hbmFnZW1lbnQgPT09PT09PT09PT09XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0VXNlcnMgPSBhc3luYyAoXHJcbiAgcGFnZSA9IDEsXHJcbiAgbGltaXQgPSAyMCxcclxuICBvcHRpb25zPzogeyByb2xlPzogc3RyaW5nOyBzZWFyY2g/OiBzdHJpbmcgfVxyXG4pOiBQcm9taXNlPFBhZ2luYXRlZFJlc3BvbnNlPEFkbWluVXNlcj4+ID0+IHtcclxuICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgcGFnZTogU3RyaW5nKHBhZ2UpLCBsaW1pdDogU3RyaW5nKGxpbWl0KSB9KTtcclxuICBpZiAob3B0aW9ucz8ucm9sZSkgcGFyYW1zLmFwcGVuZCgncm9sZScsIG9wdGlvbnMucm9sZSk7XHJcbiAgaWYgKG9wdGlvbnM/LnNlYXJjaCkgcGFyYW1zLmFwcGVuZCgnc2VhcmNoJywgb3B0aW9ucy5zZWFyY2gpO1xyXG4gIFxyXG4gIHJldHVybiBmZXRjaEFwaTxQYWdpbmF0ZWRSZXNwb25zZTxBZG1pblVzZXI+PihgL3YxL2FkbWluL3VzZXJzPyR7cGFyYW1zfWApO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFVzZXJCeUlkID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx7IGRhdGE6IEFkbWluVXNlciB9PiA9PiB7XHJcbiAgcmV0dXJuIGZldGNoQXBpPHsgZGF0YTogQWRtaW5Vc2VyIH0+KGAvdjEvYWRtaW4vdXNlcnMvJHt1c2VySWR9YCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlclJvbGUgPSBhc3luYyAoXHJcbiAgdXNlcklkOiBzdHJpbmcsXHJcbiAgcm9sZTogJ3VzZXInIHwgJ2FkbWluJyB8ICdtb2RlcmF0b3InXHJcbik6IFByb21pc2U8eyBtZXNzYWdlOiBzdHJpbmc7IGRhdGE6IEFkbWluVXNlciB9PiA9PiB7XHJcbiAgcmV0dXJuIGZldGNoQXBpPHsgbWVzc2FnZTogc3RyaW5nOyBkYXRhOiBBZG1pblVzZXIgfT4oYC92MS9hZG1pbi91c2Vycy8ke3VzZXJJZH0vcm9sZWAsIHtcclxuICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcm9sZSB9KSxcclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVVc2VyQWN0aXZlID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx7IG1lc3NhZ2U6IHN0cmluZzsgZGF0YTogeyBpZDogc3RyaW5nOyBpc0FjdGl2ZTogYm9vbGVhbiB9IH0+ID0+IHtcclxuICByZXR1cm4gZmV0Y2hBcGk8eyBtZXNzYWdlOiBzdHJpbmc7IGRhdGE6IHsgaWQ6IHN0cmluZzsgaXNBY3RpdmU6IGJvb2xlYW4gfSB9PihgL3YxL2FkbWluL3VzZXJzLyR7dXNlcklkfS90b2dnbGUtYWN0aXZlYCwge1xyXG4gICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZVVzZXIgPSBhc3luYyAodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHsgbWVzc2FnZTogc3RyaW5nIH0+ID0+IHtcclxuICByZXR1cm4gZmV0Y2hBcGk8eyBtZXNzYWdlOiBzdHJpbmcgfT4oYC92MS9hZG1pbi91c2Vycy8ke3VzZXJJZH1gLCB7XHJcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gIH0pO1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFLQSxJQUFBQSxZQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxJQUFBLEdBQUFELE9BQUE7QUFBcUMsU0FBQUUsUUFBQUMsQ0FBQSxFQUFBQyxDQUFBLFFBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxJQUFBLENBQUFKLENBQUEsT0FBQUcsTUFBQSxDQUFBRSxxQkFBQSxRQUFBQyxDQUFBLEdBQUFILE1BQUEsQ0FBQUUscUJBQUEsQ0FBQUwsQ0FBQSxHQUFBQyxDQUFBLEtBQUFLLENBQUEsR0FBQUEsQ0FBQSxDQUFBQyxNQUFBLFdBQUFOLENBQUEsV0FBQUUsTUFBQSxDQUFBSyx3QkFBQSxDQUFBUixDQUFBLEVBQUFDLENBQUEsRUFBQVEsVUFBQSxPQUFBUCxDQUFBLENBQUFRLElBQUEsQ0FBQUMsS0FBQSxDQUFBVCxDQUFBLEVBQUFJLENBQUEsWUFBQUosQ0FB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