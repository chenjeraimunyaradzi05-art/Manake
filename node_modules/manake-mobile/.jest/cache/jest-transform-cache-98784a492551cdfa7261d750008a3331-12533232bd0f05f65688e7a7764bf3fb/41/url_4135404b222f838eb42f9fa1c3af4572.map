{"version":3,"names":["_whatwgUrlWithoutUnicode","require","isSetup","BLOB_URL_PREFIX","getBlobUrlPrefix","BlobModule","global","RN$Bridgeless","nativeModuleProxy","__turboModuleProxy","constants","getConstants","BLOB_URI_SCHEME","encodeURIComponent","BLOB_URI_HOST","URL","createObjectURL","blob","Error","data","blobId","offset","size","revokeObjectURL","url"],"sources":["../../src/winter/url.ts"],"sourcesContent":["/**\n * Copyright © 2023-present 650 Industries, Inc. (aka Expo)\n * Copyright © Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This file should not import `react-native` in order to remain self-contained.\n\nimport { URL, URLSearchParams } from 'whatwg-url-without-unicode';\n\nlet isSetup = false;\nlet BLOB_URL_PREFIX: string | null = null;\n\nfunction getBlobUrlPrefix() {\n  if (isSetup) return BLOB_URL_PREFIX;\n  isSetup = true;\n  // if iOS: let BLOB_URL_PREFIX = 'blob:'\n\n  // Pull the blob module without importing React Native.\n  const BlobModule =\n    global.RN$Bridgeless !== true\n      ? // Legacy RN implementation\n        global.nativeModuleProxy['BlobModule']\n      : // Newer RN implementation\n        global.__turboModuleProxy('BlobModule');\n\n  const constants = 'BLOB_URI_SCHEME' in BlobModule ? BlobModule : BlobModule.getConstants();\n\n  if (constants && typeof constants.BLOB_URI_SCHEME === 'string') {\n    BLOB_URL_PREFIX = encodeURIComponent(constants.BLOB_URI_SCHEME) + ':';\n    if (typeof constants.BLOB_URI_HOST === 'string') {\n      BLOB_URL_PREFIX += `//${encodeURIComponent(constants.BLOB_URI_HOST)}/`;\n    }\n  }\n  return BLOB_URL_PREFIX;\n}\n\n/**\n * To allow Blobs be accessed via `content://` URIs,\n * you need to register `BlobProvider` as a ContentProvider in your app's `AndroidManifest.xml`:\n *\n * ```xml\n * <manifest>\n *   <application>\n *     <provider\n *       android:name=\"com.facebook.react.modules.blob.BlobProvider\"\n *       android:authorities=\"@string/blob_provider_authority\"\n *       android:exported=\"false\"\n *     />\n *   </application>\n * </manifest>\n * ```\n * And then define the `blob_provider_authority` string in `res/values/strings.xml`.\n * Use a dotted name that's entirely unique to your app:\n *\n * ```xml\n * <resources>\n *   <string name=\"blob_provider_authority\">your.app.package.blobs</string>\n * </resources>\n * ```\n */\nURL.createObjectURL = function createObjectURL(blob) {\n  if (getBlobUrlPrefix() == null) {\n    throw new Error('Cannot create URL for blob');\n  }\n  return `${getBlobUrlPrefix()}${encodeURIComponent(blob.data.blobId)}?offset=${encodeURIComponent(\n    blob.data.offset\n  )}&size=${encodeURIComponent(blob.size)}`;\n};\n\nURL.revokeObjectURL = function revokeObjectURL(url) {\n  // Do nothing.\n};\n\nexport { URL, URLSearchParams };\n"],"mappings":";;;;;;;;;;;;;;;AAUA,IAAAA,wBAAA,GAAAC,OAAA;AAEA,IAAIC,OAAO,GAAG,KAAK;AACnB,IAAIC,eAAe,GAAkB,IAAI;AAEzC,SAASC,gBAAgBA,CAAA;EACvB,IAAIF,OAAO,EAAE,OAAOC,eAAe;EACnCD,OAAO,GAAG,IAAI;EAId,IAAMG,UAAU,GACdC,MAAM,CAACC,aAAa,KAAK,IAAI,GAEzBD,MAAM,CAACE,iBAAiB,CAAC,YAAY,CAAC,GAEtCF,MAAM,CAACG,kBAAkB,CAAC,YAAY,CAAC;EAE7C,IAAMC,SAAS,GAAG,iBAAiB,IAAIL,UAAU,GAAGA,UAAU,GAAGA,UAAU,CAACM,YAAY,EAAE;EAE1F,IAAID,SAAS,IAAI,OAAOA,SAAS,CAACE,eAAe,KAAK,QAAQ,EAAE;IAC9DT,eAAe,GAAGU,kBAAkB,CAACH,SAAS,CAACE,eAAe,CAAC,GAAG,GAAG;IACrE,IAAI,OAAOF,SAAS,CAACI,aAAa,KAAK,QAAQ,EAAE;MAC/CX,eAAe,IAAI,KAAKU,kBAAkB,CAACH,SAAS,CAACI,aAAa,CAAC,GAAG;;;EAG1E,OAAOX,eAAe;AACxB;AA0BAY,4BAAG,CAACC,eAAe,GAAG,SAASA,eAAeA,CAACC,IAAI;EACjD,IAAIb,gBAAgB,EAAE,IAAI,IAAI,EAAE;IAC9B,MAAM,IAAIc,KAAK,CAAC,4BAA4B,CAAC;;EAE/C,OAAO,GAAGd,gBAAgB,EAAE,GAAGS,kBAAkB,CAACI,IAAI,CAACE,IAAI,CAACC,MAAM,CAAC,WAAWP,kBAAkB,CAC9FI,IAAI,CAACE,IAAI,CAACE,MAAM,CACjB,SAASR,kBAAkB,CAACI,IAAI,CAACK,IAAI,CAAC,EAAE;AAC3C,CAAC;AAEDP,4BAAG,CAACQ,eAAe,GAAG,SAASA,eAAeA,CAACC,GAAG,GAElD,CAAC","ignoreList":[]}