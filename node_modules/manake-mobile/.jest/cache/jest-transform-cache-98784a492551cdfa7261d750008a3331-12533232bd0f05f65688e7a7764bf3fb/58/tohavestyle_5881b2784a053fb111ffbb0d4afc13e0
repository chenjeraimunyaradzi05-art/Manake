f82aab1699272b7f53ef2487da5af83f
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.toHaveStyle = toHaveStyle;
var _reactNative = require("react-native");
var _jestMatcherUtils = require("jest-matcher-utils");
var _utils = require("./utils");
function toHaveStyle(element, style) {
  var _reactNative$StyleShe,
    _reactNative$StyleShe2,
    _this = this;
  (0, _utils.checkHostElement)(element, toHaveStyle, this);
  var expected = (_reactNative$StyleShe = _reactNative.StyleSheet.flatten(style)) != null ? _reactNative$StyleShe : {};
  var received = (_reactNative$StyleShe2 = _reactNative.StyleSheet.flatten(element.props.style)) != null ? _reactNative$StyleShe2 : {};
  var pass = Object.keys(expected).every(function (key) {
    return _this.equals(expected[key], received[key]);
  });
  return {
    pass: pass,
    message: function message() {
      var to = _this.isNot ? 'not to' : 'to';
      var matcher = (0, _jestMatcherUtils.matcherHint)(`${_this.isNot ? '.not' : ''}.toHaveStyle`, 'element', '');
      if (pass) {
        return (0, _utils.formatMessage)(matcher, `Expected element ${to} have style`, formatStyles(expected), 'Received', formatStyles(pickReceivedStyles(expected, received)));
      } else {
        return [matcher, '', expectedDiff(expected, received)].join('\n');
      }
    }
  };
}
function expectedDiff(expected, received) {
  var receivedNarrow = pickReceivedStyles(expected, received);
  return (0, _jestMatcherUtils.diff)(formatStyles(expected), formatStyles(receivedNarrow));
}
function pickReceivedStyles(expected, received) {
  var result = {};
  Object.keys(received).forEach(function (key) {
    if (expected[key] !== undefined) {
      result[key] = received[key];
    }
  });
  return result;
}
function formatStyles(style) {
  return Object.keys(style).sort().map(function (prop) {
    return Array.isArray(style[prop]) ? `${prop}: ${JSON.stringify(style[prop], null, 2)};` : `${prop}: ${style[prop]};`;
  }).join('\n');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3ROYXRpdmUiLCJyZXF1aXJlIiwiX2plc3RNYXRjaGVyVXRpbHMiLCJfdXRpbHMiLCJ0b0hhdmVTdHlsZSIsImVsZW1lbnQiLCJzdHlsZSIsIl9yZWFjdE5hdGl2ZSRTdHlsZVNoZSIsIl9yZWFjdE5hdGl2ZSRTdHlsZVNoZTIiLCJfdGhpcyIsImNoZWNrSG9zdEVsZW1lbnQiLCJleHBlY3RlZCIsIlN0eWxlU2hlZXQiLCJmbGF0dGVuIiwicmVjZWl2ZWQiLCJwcm9wcyIsInBhc3MiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJrZXkiLCJlcXVhbHMiLCJtZXNzYWdlIiwidG8iLCJpc05vdCIsIm1hdGNoZXIiLCJtYXRjaGVySGludCIsImZvcm1hdE1lc3NhZ2UiLCJmb3JtYXRTdHlsZXMiLCJwaWNrUmVjZWl2ZWRTdHlsZXMiLCJleHBlY3RlZERpZmYiLCJqb2luIiwicmVjZWl2ZWROYXJyb3ciLCJkaWZmIiwicmVzdWx0IiwiZm9yRWFjaCIsInVuZGVmaW5lZCIsInNvcnQiLCJtYXAiLCJwcm9wIiwiQXJyYXkiLCJpc0FycmF5IiwiSlNPTiIsInN0cmluZ2lmeSJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tYXRjaGVycy90by1oYXZlLXN0eWxlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFJlYWN0VGVzdEluc3RhbmNlIH0gZnJvbSAncmVhY3QtdGVzdC1yZW5kZXJlcic7XG5pbXBvcnQge1xuICBJbWFnZVN0eWxlLFxuICBTdHlsZVByb3AsXG4gIFN0eWxlU2hlZXQsXG4gIFRleHRTdHlsZSxcbiAgVmlld1N0eWxlLFxufSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IHsgbWF0Y2hlckhpbnQsIGRpZmYgfSBmcm9tICdqZXN0LW1hdGNoZXItdXRpbHMnO1xuaW1wb3J0IHsgY2hlY2tIb3N0RWxlbWVudCwgZm9ybWF0TWVzc2FnZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgdHlwZSBTdHlsZSA9IFZpZXdTdHlsZSB8IFRleHRTdHlsZSB8IEltYWdlU3R5bGU7XG5cbnR5cGUgU3R5bGVMaWtlID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0hhdmVTdHlsZShcbiAgdGhpczogamVzdC5NYXRjaGVyQ29udGV4dCxcbiAgZWxlbWVudDogUmVhY3RUZXN0SW5zdGFuY2UsXG4gIHN0eWxlOiBTdHlsZVByb3A8U3R5bGU+XG4pIHtcbiAgY2hlY2tIb3N0RWxlbWVudChlbGVtZW50LCB0b0hhdmVTdHlsZSwgdGhpcyk7XG5cbiAgY29uc3QgZXhwZWN0ZWQgPSAoU3R5bGVTaGVldC5mbGF0dGVuKHN0eWxlKSBhcyBTdHlsZUxpa2UpID8/IHt9O1xuICBjb25zdCByZWNlaXZlZCA9IChTdHlsZVNoZWV0LmZsYXR0ZW4oZWxlbWVudC5wcm9wcy5zdHlsZSkgYXMgU3R5bGVMaWtlKSA/PyB7fTtcblxuICBjb25zdCBwYXNzID0gT2JqZWN0LmtleXMoZXhwZWN0ZWQpLmV2ZXJ5KChrZXkpID0+XG4gICAgdGhpcy5lcXVhbHMoZXhwZWN0ZWRba2V5XSwgcmVjZWl2ZWRba2V5XSlcbiAgKTtcblxuICByZXR1cm4ge1xuICAgIHBhc3MsXG4gICAgbWVzc2FnZTogKCkgPT4ge1xuICAgICAgY29uc3QgdG8gPSB0aGlzLmlzTm90ID8gJ25vdCB0bycgOiAndG8nO1xuICAgICAgY29uc3QgbWF0Y2hlciA9IG1hdGNoZXJIaW50KFxuICAgICAgICBgJHt0aGlzLmlzTm90ID8gJy5ub3QnIDogJyd9LnRvSGF2ZVN0eWxlYCxcbiAgICAgICAgJ2VsZW1lbnQnLFxuICAgICAgICAnJ1xuICAgICAgKTtcblxuICAgICAgaWYgKHBhc3MpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdE1lc3NhZ2UoXG4gICAgICAgICAgbWF0Y2hlcixcbiAgICAgICAgICBgRXhwZWN0ZWQgZWxlbWVudCAke3RvfSBoYXZlIHN0eWxlYCxcbiAgICAgICAgICBmb3JtYXRTdHlsZXMoZXhwZWN0ZWQpLFxuICAgICAgICAgICdSZWNlaXZlZCcsXG4gICAgICAgICAgZm9ybWF0U3R5bGVzKHBpY2tSZWNlaXZlZFN0eWxlcyhleHBlY3RlZCwgcmVjZWl2ZWQpKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFttYXRjaGVyLCAnJywgZXhwZWN0ZWREaWZmKGV4cGVjdGVkLCByZWNlaXZlZCldLmpvaW4oJ1xcbicpO1xuICAgICAgfVxuICAgIH0sXG4gIH07XG59XG5cbi8qKlxuICogR2VuZXJhdGUgZGlmZiBiZXR3ZWVuIGBleHBlY3RlZGAgYW5kIGByZWNlaXZlZGAgc3R5bGVzLlxuICovXG5mdW5jdGlvbiBleHBlY3RlZERpZmYoZXhwZWN0ZWQ6IFN0eWxlTGlrZSwgcmVjZWl2ZWQ6IFN0eWxlTGlrZSkge1xuICBjb25zdCByZWNlaXZlZE5hcnJvdyA9IHBpY2tSZWNlaXZlZFN0eWxlcyhleHBlY3RlZCwgcmVjZWl2ZWQpO1xuICByZXR1cm4gZGlmZihmb3JtYXRTdHlsZXMoZXhwZWN0ZWQpLCBmb3JtYXRTdHlsZXMocmVjZWl2ZWROYXJyb3cpKTtcbn1cblxuLyoqXG4gKiBQaWNrIGZyb20gYHJlY2VpdmVkYCBzdHlsZSBvbmx5IHRoZSBrZXlzIHByZXNlbnQgaW4gYGV4cGVjdGVkYCBzdHlsZS5cbiAqL1xuZnVuY3Rpb24gcGlja1JlY2VpdmVkU3R5bGVzKGV4cGVjdGVkOiBTdHlsZUxpa2UsIHJlY2VpdmVkOiBTdHlsZUxpa2UpIHtcbiAgY29uc3QgcmVzdWx0OiBTdHlsZUxpa2UgPSB7fTtcbiAgT2JqZWN0LmtleXMocmVjZWl2ZWQpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChleHBlY3RlZFtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gcmVjZWl2ZWRba2V5XTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFN0eWxlcyhzdHlsZTogU3R5bGVMaWtlKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhzdHlsZSlcbiAgICAuc29ydCgpXG4gICAgLm1hcCgocHJvcCkgPT5cbiAgICAgIEFycmF5LmlzQXJyYXkoc3R5bGVbcHJvcF0pXG4gICAgICAgID8gYCR7cHJvcH06ICR7SlNPTi5zdHJpbmdpZnkoc3R5bGVbcHJvcF0sIG51bGwsIDIpfTtgXG4gICAgICAgIDogYCR7cHJvcH06ICR7c3R5bGVbcHJvcF19O2BcbiAgICApXG4gICAgLmpvaW4oJ1xcbicpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQUFBQSxZQUFBLEdBQUFDLE9BQUE7QUFPQSxJQUFBQyxpQkFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsTUFBQSxHQUFBRixPQUFBO0FBTU8sU0FBU0csV0FBV0EsQ0FFekJDLE9BQTBCLEVBQzFCQyxLQUF1QixFQUN2QjtFQUFBLElBQUFDLHFCQUFBO0lBQUFDLHNCQUFBO0lBQUFDLEtBQUE7RUFDQSxJQUFBTixNQUFBLENBQUFPLGdCQUFnQixFQUFDTCxPQUFPLEVBQUVELFdBQVcsRUFBRSxJQUFJLENBQUM7RUFFNUMsSUFBTU8sUUFBUSxJQUFBSixxQkFBQSxHQUFJUCxZQUFBLENBQUFZLFVBQVUsQ0FBQ0MsT0FBTyxDQUFDUCxLQUFLLENBQUMsWUFBQUMscUJBQUEsR0FBa0IsQ0FBQyxDQUFDO0VBQy9ELElBQU1PLFFBQVEsSUFBQU4sc0JBQUEsR0FBSVIsWUFBQSxDQUFBWSxVQUFVLENBQUNDLE9BQU8sQ0FBQ1IsT0FBTyxDQUFDVSxLQUFLLENBQUNULEtBQUssQ0FBQyxZQUFBRSxzQkFBQSxHQUFrQixDQUFDLENBQUM7RUFFN0UsSUFBTVEsSUFBSSxHQUFHQyxNQUFNLENBQUNDLElBQUksQ0FBQ1AsUUFBUSxDQUFDLENBQUNRLEtBQUssQ0FBRSxVQUFBQyxHQUFHO0lBQUEsT0FDM0NYLEtBQUksQ0FBQ1ksTUFBTSxDQUFDVixRQUFRLENBQUNTLEdBQUcsQ0FBQyxFQUFFTixRQUFRLENBQUNNLEdBQUcsQ0FBQyxDQUMxQztFQUFBLEVBQUM7RUFFRCxPQUFPO0lBQ0xKLElBQUksRUFBSkEsSUFBSTtJQUNKTSxPQUFPLEVBQUUsU0FBVEEsT0FBT0EsQ0FBQSxFQUFRO01BQ2IsSUFBTUMsRUFBRSxHQUFHZCxLQUFJLENBQUNlLEtBQUssR0FBRyxRQUFRLEdBQUcsSUFBSTtNQUN2QyxJQUFNQyxPQUFPLEdBQUcsSUFBQXZCLGlCQUFBLENBQUF3QixXQUFXLEVBQ3hCLEdBQUVqQixLQUFJLENBQUNlLEtBQUssR0FBRyxNQUFNLEdBQUcsRUFBRyxjQUFhLEVBQ3pDLFNBQVMsRUFDVCxFQUNGLENBQUM7TUFFRCxJQUFJUixJQUFJLEVBQUU7UUFDUixPQUFPLElBQUFiLE1BQUEsQ0FBQXdCLGFBQWEsRUFDbEJGLE9BQU8sRUFDTixvQkFBbUJGLEVBQUcsYUFBWSxFQUNuQ0ssWUFBWSxDQUFDakIsUUFBUSxDQUFDLEVBQ3RCLFVBQVUsRUFDVmlCLFlBQVksQ0FBQ0Msa0JBQWtCLENBQUNsQixRQUFRLEVBQUVHLFFBQVEsQ0FBQyxDQUNyRCxDQUFDO01BQ0gsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxDQUFDVyxPQUFPLEVBQUUsRUFBRSxFQUFFSyxZQUFZLENBQUNuQixRQUFRLEVBQUVHLFFBQVEsQ0FBQyxDQUFDLENBQUNpQixJQUFJLENBQUMsSUFBSSxDQUFDO01BQ25FO0lBQ0Y7RUFDRixDQUFDO0FBQ0g7QUFLQSxTQUFTRCxZQUFZQSxDQUFDbkIsUUFBbUIsRUFBRUcsUUFBbUIsRUFBRTtFQUM5RCxJQUFNa0IsY0FBYyxHQUFHSCxrQkFBa0IsQ0FBQ2xCLFFBQVEsRUFBRUcsUUFBUSxDQUFDO0VBQzdELE9BQU8sSUFBQVosaUJBQUEsQ0FBQStCLElBQUksRUFBQ0wsWUFBWSxDQUFDakIsUUFBUSxDQUFDLEVBQUVpQixZQUFZLENBQUNJLGNBQWMsQ0FBQyxDQUFDO0FBQ25FO0FBS0EsU0FBU0gsa0JBQWtCQSxDQUFDbEIsUUFBbUIsRUFBRUcsUUFBbUIsRUFBRTtFQUNwRSxJQUFNb0IsTUFBaUIsR0FBRyxDQUFDLENBQUM7RUFDNUJqQixNQUFNLENBQUNDLElBQUksQ0FBQ0osUUFBUSxDQUFDLENBQUNxQixPQUFPLENBQUUsVUFBQWYsR0FBRyxFQUFLO0lBQ3JDLElBQUlULFFBQVEsQ0FBQ1MsR0FBRyxDQUFDLEtBQUtnQixTQUFTLEVBQUU7TUFDL0JGLE1BQU0sQ0FBQ2QsR0FBRyxDQUFDLEdBQUdOLFFBQVEsQ0FBQ00sR0FBRyxDQUFDO0lBQzdCO0VBQ0YsQ0FBQyxDQUFDO0VBRUYsT0FBT2MsTUFBTTtBQUNmO0FBRUEsU0FBU04sWUFBWUEsQ0FBQ3RCLEtBQWdCLEVBQUU7RUFDdEMsT0FBT1csTUFBTSxDQUFDQyxJQUFJLENBQUNaLEtBQUssQ0FBQyxDQUN0QitCLElBQUksQ0FBQyxDQUFDLENBQ05DLEdBQUcsQ0FBRSxVQUFBQyxJQUFJO0lBQUEsT0FDUkMsS0FBSyxDQUFDQyxPQUFPLENBQUNuQyxLQUFLLENBQUNpQyxJQUFJLENBQUMsQ0FBQyxHQUNyQixHQUFFQSxJQUFLLEtBQUlHLElBQUksQ0FBQ0MsU0FBUyxDQUFDckMsS0FBSyxDQUFDaUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBRSxHQUFFLEdBQ2xELEdBQUVBLElBQUssS0FBSWpDLEtBQUssQ0FBQ2lDLElBQUksQ0FBRSxHQUM5QjtFQUFBLEVBQUMsQ0FDQVIsSUFBSSxDQUFDLElBQUksQ0FBQztBQUNmIiwiaWdub3JlTGlzdCI6W119